<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.3 Customizations | Devdoc-Swissknife EN</title>
  <meta name="description" content="Devdoc-Swissknife - General Documentation" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="4.3 Customizations | Devdoc-Swissknife EN" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://Godhart.github.io/devdoc-swissknife/devdoc-swissknife-en//../images/cover.png" />
  <meta property="og:description" content="Devdoc-Swissknife - General Documentation" />
  <meta name="github-repo" content="Godhart/devdoc-swissknife" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.3 Customizations | Devdoc-Swissknife EN" />
  
  <meta name="twitter:description" content="Devdoc-Swissknife - General Documentation" />
  <meta name="twitter:image" content="https://Godhart.github.io/devdoc-swissknife/devdoc-swissknife-en//../images/cover.png" />

<meta name="author" content="Nikolay Gniteev" />


<meta name="date" content="2022-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="4.2-usage-svg.html"/>
<link rel="next" href="4.4-usage-format.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="../css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Devdoc-Swissknife EN</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links"><i class="fa fa-check"></i>Helpful links</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#links-alternatives"><i class="fa fa-check"></i>Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="1-examples.html"><a href="1-examples.html"><i class="fa fa-check"></i><b>1</b> Simple diagrams examples</a>
<ul>
<li class="chapter" data-level="" data-path="1-examples.html"><a href="1-examples.html#examples-inline"><i class="fa fa-check"></i>Example with inline diagram description</a></li>
<li class="chapter" data-level="" data-path="1-examples.html"><a href="1-examples.html#examples-fromFile"><i class="fa fa-check"></i>Example with diagram data from file</a></li>
<li class="chapter" data-level="" data-path="1-examples.html"><a href="1-examples.html#examples-more"><i class="fa fa-check"></i>More examples</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-template.html"><a href="2-template.html"><i class="fa fa-check"></i><b>2</b> Using as a template and making own docs</a></li>
<li class="chapter" data-level="3" data-path="3-examples-kroki.html"><a href="3-examples-kroki.html"><i class="fa fa-check"></i><b>3</b> Kroki usage examples</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3.1-kroki-c4context.html"><a href="3.1-kroki-c4context.html"><i class="fa fa-check"></i><b>3.1</b> C4 Context Diagram (PlantUML+C4)</a></li>
<li class="chapter" data-level="3.2" data-path="3.2-kroki-c4container.html"><a href="3.2-kroki-c4container.html"><i class="fa fa-check"></i><b>3.2</b> C4 Container Diagram (PlantUML+C4)</a></li>
<li class="chapter" data-level="3.3" data-path="3.3-kroki-c4component.html"><a href="3.3-kroki-c4component.html"><i class="fa fa-check"></i><b>3.3</b> C4 Component Diagram (PlantUML+C4)</a></li>
<li class="chapter" data-level="3.4" data-path="3.4-kroki-blockdiag.html"><a href="3.4-kroki-blockdiag.html"><i class="fa fa-check"></i><b>3.4</b> Block Diagram</a></li>
<li class="chapter" data-level="3.5" data-path="3.5-kroki-timing.html"><a href="3.5-kroki-timing.html"><i class="fa fa-check"></i><b>3.5</b> Digital Timing Diagram</a></li>
<li class="chapter" data-level="3.6" data-path="3.6-kroki-bytefield.html"><a href="3.6-kroki-bytefield.html"><i class="fa fa-check"></i><b>3.6</b> Bytefield</a></li>
<li class="chapter" data-level="3.7" data-path="3.7-kroki-packet.html"><a href="3.7-kroki-packet.html"><i class="fa fa-check"></i><b>3.7</b> Packet Diagram</a></li>
<li class="chapter" data-level="3.8" data-path="3.8-kroki-pumlSequence.html"><a href="3.8-kroki-pumlSequence.html"><i class="fa fa-check"></i><b>3.8</b> Sequence Diagram #1 (PlantUML)</a></li>
<li class="chapter" data-level="3.9" data-path="3.9-kroki-sequence.html"><a href="3.9-kroki-sequence.html"><i class="fa fa-check"></i><b>3.9</b> Sequence Diagram #2 (SeqDiag)</a></li>
<li class="chapter" data-level="3.10" data-path="3.10-kroki-commitgraph.html"><a href="3.10-kroki-commitgraph.html"><i class="fa fa-check"></i><b>3.10</b> Commit Graph</a></li>
<li class="chapter" data-level="3.11" data-path="3.11-kroki-pumlUsecase.html"><a href="3.11-kroki-pumlUsecase.html"><i class="fa fa-check"></i><b>3.11</b> Use Case Diagram</a></li>
<li class="chapter" data-level="3.12" data-path="3.12-kroki-pumlMindmap.html"><a href="3.12-kroki-pumlMindmap.html"><i class="fa fa-check"></i><b>3.12</b> Mind Map</a></li>
<li class="chapter" data-level="3.13" data-path="3.13-kroki-pumlMore.html"><a href="3.13-kroki-pumlMore.html"><i class="fa fa-check"></i><b>3.13</b> PlantUML (More examples)</a></li>
<li class="chapter" data-level="3.14" data-path="3.14-kroki-gantt.html"><a href="3.14-kroki-gantt.html"><i class="fa fa-check"></i><b>3.14</b> Gantt</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-usage.html"><a href="4-usage.html"><i class="fa fa-check"></i><b>4</b> Usage patterns</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4.1-usage-embed.html"><a href="4.1-usage-embed.html"><i class="fa fa-check"></i><b>4.1</b> Embedding diagrams into a document</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="4.1-usage-embed.html"><a href="4.1-usage-embed.html#usage-embed-inline"><i class="fa fa-check"></i><b>4.1.1</b> Describing diagrams inline in the documentation</a></li>
<li class="chapter" data-level="4.1.2" data-path="4.1-usage-embed.html"><a href="4.1-usage-embed.html#usage-embed-raw"><i class="fa fa-check"></i><b>4.1.2</b> Diagrams from raw outer files</a></li>
<li class="chapter" data-level="4.1.3" data-path="4.1-usage-embed.html"><a href="4.1-usage-embed.html#usage-embed-rmd"><i class="fa fa-check"></i><b>4.1.3</b> Diagrams from Rmd outer file</a></li>
<li class="chapter" data-level="4.1.4" data-path="4.1-usage-embed.html"><a href="4.1-usage-embed.html#usage-embed-getThenEmbed"><i class="fa fa-check"></i><b>4.1.4</b> Get then embed</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4.2-usage-svg.html"><a href="4.2-usage-svg.html"><i class="fa fa-check"></i><b>4.2</b> HTML: SVG - Raw vs from File</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="4.2-usage-svg.html"><a href="4.2-usage-svg.html#usage-svg-raw"><i class="fa fa-check"></i><b>4.2.1</b> Raw SVG</a></li>
<li class="chapter" data-level="4.2.2" data-path="4.2-usage-svg.html"><a href="4.2-usage-svg.html#usage-svg-file"><i class="fa fa-check"></i><b>4.2.2</b> SVG from file</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html"><i class="fa fa-check"></i><b>4.3</b> Customizations</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-rChunks"><i class="fa fa-check"></i><b>4.3.1</b> R Chunks</a></li>
<li class="chapter" data-level="4.3.2" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-globalOpts"><i class="fa fa-check"></i><b>4.3.2</b> Global options</a></li>
<li class="chapter" data-level="4.3.3" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-templateOpts"><i class="fa fa-check"></i><b>4.3.3</b> Options templates</a></li>
<li class="chapter" data-level="4.3.4" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-optionsHooks"><i class="fa fa-check"></i><b>4.3.4</b> Options hooks</a></li>
<li class="chapter" data-level="4.3.5" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-multipleFormats"><i class="fa fa-check"></i><b>4.3.5</b> Multiple output formats</a></li>
<li class="chapter" data-level="4.3.6" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-params"><i class="fa fa-check"></i><b>4.3.6</b> Define parameters</a></li>
<li class="chapter" data-level="4.3.7" data-path="4.3-usage-customize.html"><a href="4.3-usage-customize.html#usage-customize-summary"><i class="fa fa-check"></i><b>4.3.7</b> Putting all together</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4.4-usage-format.html"><a href="4.4-usage-format.html"><i class="fa fa-check"></i><b>4.4</b> Data format</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="4.4-usage-format.html"><a href="4.4-usage-format.html#usage-format-renderer"><i class="fa fa-check"></i><b>4.4.1</b> Renderer format</a></li>
<li class="chapter" data-level="4.4.2" data-path="4.4-usage-format.html"><a href="4.4-usage-format.html#usage-format-conversion"><i class="fa fa-check"></i><b>4.4.2</b> Local conversion</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4.5-usage-pdf.html"><a href="4.5-usage-pdf.html"><i class="fa fa-check"></i><b>4.5</b> PDF production</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="4.5-usage-pdf.html"><a href="4.5-usage-pdf.html#usage-pdf-pageBreak"><i class="fa fa-check"></i><b>4.5.1</b> Page breaks</a></li>
<li class="chapter" data-level="4.5.2" data-path="4.5-usage-pdf.html"><a href="4.5-usage-pdf.html#usage-pdf-pageOrientation"><i class="fa fa-check"></i><b>4.5.2</b> Page orientation</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="4.6-usage-spec.html"><a href="4.6-usage-spec.html"><i class="fa fa-check"></i><b>4.6</b> Full <strong>to_diagram</strong> function specification</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-usage-other.html"><a href="5-usage-other.html"><i class="fa fa-check"></i><b>5</b> Other drawings</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5.1-usage-rendered.html"><a href="5.1-usage-rendered.html"><i class="fa fa-check"></i><b>5.1</b> Already rendered diagrams</a></li>
<li class="chapter" data-level="5.2" data-path="5.2-usage-office.html"><a href="5.2-usage-office.html"><i class="fa fa-check"></i><b>5.2</b> Office files</a></li>
<li class="chapter" data-level="5.3" data-path="5.3-usage-custom-dia-render.html"><a href="5.3-usage-custom-dia-render.html"><i class="fa fa-check"></i><b>5.3</b> Add your custom renderer</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-anatomy.html"><a href="6-anatomy.html"><i class="fa fa-check"></i><b>6</b> Project anatomy</a></li>
<li class="chapter" data-level="7" data-path="7-diagrams-reference.html"><a href="7-diagrams-reference.html"><i class="fa fa-check"></i><b>7</b> Diagrams reference</a>
<ul>
<li class="chapter" data-level="7.1" data-path="7.1-refrencing-embeded-diagrams.html"><a href="7.1-refrencing-embeded-diagrams.html"><i class="fa fa-check"></i><b>7.1</b> Refrencing embeded diagrams</a></li>
<li class="chapter" data-level="7.2" data-path="7.2-native-r-markdown.html"><a href="7.2-native-r-markdown.html"><i class="fa fa-check"></i><b>7.2</b> Native R Markdown</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Devdoc-Swissknife EN</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="usage-customize" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Customizations<a href="4.3-usage-customize.html#usage-customize" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes you’ll want to or need to specify a customizations like <em>width</em> or <em>hight</em> of diagrams
when defaults don’t work fine or just because of your taste or requirements.
Also sometimes you’ll have to use non-default <em>image format</em> for the same reasons.
Or you may want to go deeper with customizations and define <em>alignment</em>
and other things like <em>post processing</em>, <em>multiple images</em> in a row, etc.</p>
<blockquote>
<p>Probably you wouldn’t want to use customizations at all when you in the beginning
or in hurry to capture your ideas, but if you need some - start from here.</p>
</blockquote>
<p>Most of customizations are specified via <a href="4.3-usage-customize.html#usage-customize-rChunks"><strong>R chunk</strong></a> options.</p>
<p>In case if it’s required to download rendered diagram in format other than SVG <a href="4.4-usage-format.html#usage-format-renderer">use</a> <code>dformat</code>
argument for <a href="4.6-usage-spec.html#usage-spec">to_diagram</a> function.</p>
<p>Also for PDF production you’ll want for sure things like page break, page orientation specification etc.
In this case you will need to add some <a href="#usage-latex">latex commands</a> into document.</p>
<div id="usage-customize-rChunks" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> R Chunks<a href="4.3-usage-customize.html#usage-customize-rChunks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://bookdown.org/yihui/rmarkdown/r-code.html"><strong>R Chunks</strong></a> is a way to embed graphics data in <strong>R Markdown</strong>.</p>
<blockquote>
<p>Another way is to use markdown syntax like <code>![&lt;alt text&gt;](&lt;path to image&gt;){&lt;options&gt;}</code>,
but it’s not the case since it works for ready to use images only.</p>
</blockquote>
<p>Customizations to the way an image is embded are speicifed via <strong>R chunk</strong> <a href="https://bookdown.org/yihui/rmarkdown/r-code.html#figures">options</a>.</p>
<p>More info about options could be found <a href="https://yihui.org/knitr/options/">here</a>
and here is a nice <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">cheatsheet</a>.</p>
<p>Following options have effect for diagrams:</p>
<ul>
<li><em>out.width</em></li>
<li><em>out.height</em></li>
<li>TODO</li>
</ul>
<p>Following options have no effect for diagrams:</p>
<ul>
<li><em>fig.width</em></li>
<li><em>fig.height</em></li>
<li>TODO</li>
</ul>
<p>The other way to customize is to use <a href="https://yihui.org/knitr/hooks/">hooks</a>.
It’s very creative way and all depends on your needs.</p>
<p>Besides spcifying options explicitly for every chunk, you can define default values globally or via named templates,
use option hooks to automatically derive one options from another. See more about this in the following sections.</p>
</div>
<div id="usage-customize-globalOpts" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Global options<a href="4.3-usage-customize.html#usage-customize-globalOpts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is done by putting chunk of code with <code>knitr::opts_chunk$set</code> function call
in the beginning of your documentation (i.e. <code>index.Rmd</code>).</p>
<p>Also global options could be redefined later in documentation for the following chunks.
For example this could be done in the beginning of every chapter.</p>
<blockquote>
<p>ATTENTION: But make sure in that case that you follow this pattern throughout whole document,
otherwise you may find yourself fighting with customizations.<br />
</p>
</blockquote>
<p>Global options could be good for output format related customizations,
in other cases it’s better to use templates, described in next section.</p>
<p>Example code to define chunk options globally:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="4.3-usage-customize.html#cb9-1" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, include=FALSE}</span></span>
<span id="cb9-2"><a href="4.3-usage-customize.html#cb9-2" aria-hidden="true"></a><span class="dt">knitr::opts_chunk$set(</span></span>
<span id="cb9-3"><a href="4.3-usage-customize.html#cb9-3" aria-hidden="true"></a><span class="dt">  out.width = &#39;5cm&#39;</span></span>
<span id="cb9-4"><a href="4.3-usage-customize.html#cb9-4" aria-hidden="true"></a><span class="dt">)</span></span>
<span id="cb9-5"><a href="4.3-usage-customize.html#cb9-5" aria-hidden="true"></a><span class="st">```</span></span></code></pre></div>
<p>More info could be found <a href="https://bookdown.org/yihui/rmarkdown-cookbook/chunk-options.html#chunk-options">here</a></p>
<!-- TODO: this chunk os merged from docs_WIP but it needs to be checked how it fits into current revision of doc
Also global options may be set in front-matter part of `index.Rmd`:

```yaml
---
title: "My Document"
output: html_document:
fig_width: 6
fig_height: 4
---
```
-->
</div>
<div id="usage-customize-templateOpts" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Options templates<a href="4.3-usage-customize.html#usage-customize-templateOpts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is done by putting chunk of code with <code>knitr::opts_template$set</code> function call
in the beginning of your documentation (i.e. <code>index.Rmd</code>).</p>
<p>Also new templates could be defined later in documentation for the following chunks.
For example this could be done in the beginning of every chapter.</p>
<p>Example code to define options template:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="4.3-usage-customize.html#cb10-1" aria-hidden="true"></a><span class="co"># Define template</span></span>
<span id="cb10-2"><a href="4.3-usage-customize.html#cb10-2" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, include=FALSE}</span></span>
<span id="cb10-3"><a href="4.3-usage-customize.html#cb10-3" aria-hidden="true"></a><span class="dt">knitr::opts_template$set(fullwidth = list(</span></span>
<span id="cb10-4"><a href="4.3-usage-customize.html#cb10-4" aria-hidden="true"></a><span class="dt">  out.width = &#39;100%&#39;</span></span>
<span id="cb10-5"><a href="4.3-usage-customize.html#cb10-5" aria-hidden="true"></a><span class="dt">))</span></span>
<span id="cb10-6"><a href="4.3-usage-customize.html#cb10-6" aria-hidden="true"></a><span class="st">```</span></span>
<span id="cb10-7"><a href="4.3-usage-customize.html#cb10-7" aria-hidden="true"></a></span>
<span id="cb10-8"><a href="4.3-usage-customize.html#cb10-8" aria-hidden="true"></a><span class="co"># Embed diagram, using template for options</span></span>
<span id="cb10-9"><a href="4.3-usage-customize.html#cb10-9" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, dia=&#39;from_src&#39;, opts.label=&#39;fullwidth&#39;}</span></span>
<span id="cb10-10"><a href="4.3-usage-customize.html#cb10-10" aria-hidden="true"></a><span class="dt">to_diagram(src=&#39;...&#39;)</span></span>
<span id="cb10-11"><a href="4.3-usage-customize.html#cb10-11" aria-hidden="true"></a><span class="st">```</span></span>
<span id="cb10-12"><a href="4.3-usage-customize.html#cb10-12" aria-hidden="true"></a></span>
<span id="cb10-13"><a href="4.3-usage-customize.html#cb10-13" aria-hidden="true"></a><span class="co"># More options for diagram and/or template&#39;s defaults override</span></span>
<span id="cb10-14"><a href="4.3-usage-customize.html#cb10-14" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, dia=&#39;from_src&#39;, opts.label=&#39;fullwidth&#39;, fig.ext=&#39;png&#39;, out.width=&#39;10cm&#39;}</span></span>
<span id="cb10-15"><a href="4.3-usage-customize.html#cb10-15" aria-hidden="true"></a><span class="dt">to_diagram(src=&#39;...&#39;)</span></span>
<span id="cb10-16"><a href="4.3-usage-customize.html#cb10-16" aria-hidden="true"></a><span class="st">```</span></span></code></pre></div>
<!-- TODO: templates inheritance ? -->
<p>More info could be found <a href="https://bookdown.org/yihui/rmarkdown-cookbook/opts-template.html">here</a></p>
</div>
<div id="usage-customize-optionsHooks" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Options hooks<a href="4.3-usage-customize.html#usage-customize-optionsHooks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>With options hooks you can define dependencies for chunk options with code in <strong>R</strong>.</p>
<p>You can even define hooks for your own options and specify this options for chunks.
For example hook for <code>dia</code> option is defined in <code>_fun.R</code> and some chunk’s options depends on it.</p>
<p>This is done by putting chunk of code with <code>knitr::opts_hooks$set</code> function call
in the beginning of your documentation (i.e. <code>index.Rmd</code>).</p>
<p>Also new hooks cold be added or hooks could be redefined later in documentation for the following chunks.
For example this could be done in the beginning of every chapter.</p>
<p>Example code to add options hooks:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="4.3-usage-customize.html#cb11-1" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, include=FALSE}</span></span>
<span id="cb11-2"><a href="4.3-usage-customize.html#cb11-2" aria-hidden="true"></a><span class="dt"># Define hook for existing option out.width</span></span>
<span id="cb11-3"><a href="4.3-usage-customize.html#cb11-3" aria-hidden="true"></a><span class="dt">knitr::opts_hooks$set(out.width = function(options){</span></span>
<span id="cb11-4"><a href="4.3-usage-customize.html#cb11-4" aria-hidden="true"></a><span class="dt">  # Some sanity checks</span></span>
<span id="cb11-5"><a href="4.3-usage-customize.html#cb11-5" aria-hidden="true"></a><span class="dt">  if (!identical(options$out.width, NULL)) {</span></span>
<span id="cb11-6"><a href="4.3-usage-customize.html#cb11-6" aria-hidden="true"></a><span class="dt">    # Our function: if out.width is set to 100% then clear out.height option</span></span>
<span id="cb11-7"><a href="4.3-usage-customize.html#cb11-7" aria-hidden="true"></a><span class="dt">    if (options$out.width == &quot;100%&quot;) {</span></span>
<span id="cb11-8"><a href="4.3-usage-customize.html#cb11-8" aria-hidden="true"></a><span class="dt">      options$out.height &lt;- NULL</span></span>
<span id="cb11-9"><a href="4.3-usage-customize.html#cb11-9" aria-hidden="true"></a><span class="dt">    }</span></span>
<span id="cb11-10"><a href="4.3-usage-customize.html#cb11-10" aria-hidden="true"></a><span class="dt">  }</span></span>
<span id="cb11-11"><a href="4.3-usage-customize.html#cb11-11" aria-hidden="true"></a><span class="dt">  # Return new set of options</span></span>
<span id="cb11-12"><a href="4.3-usage-customize.html#cb11-12" aria-hidden="true"></a><span class="dt">  options</span></span>
<span id="cb11-13"><a href="4.3-usage-customize.html#cb11-13" aria-hidden="true"></a><span class="dt">})</span></span>
<span id="cb11-14"><a href="4.3-usage-customize.html#cb11-14" aria-hidden="true"></a></span>
<span id="cb11-15"><a href="4.3-usage-customize.html#cb11-15" aria-hidden="true"></a><span class="dt"># Define hook for new option fullwidth</span></span>
<span id="cb11-16"><a href="4.3-usage-customize.html#cb11-16" aria-hidden="true"></a><span class="dt">knitr::opts_hooks$set(fullwidth = function(options){</span></span>
<span id="cb11-17"><a href="4.3-usage-customize.html#cb11-17" aria-hidden="true"></a><span class="dt">  # Some sanity checks</span></span>
<span id="cb11-18"><a href="4.3-usage-customize.html#cb11-18" aria-hidden="true"></a><span class="dt">  if (!identical(options$fullwidth, NULL)) {</span></span>
<span id="cb11-19"><a href="4.3-usage-customize.html#cb11-19" aria-hidden="true"></a><span class="dt">    # Our function: if fullwidth is defined and evaluated as TRUE then set out.width to 100%</span></span>
<span id="cb11-20"><a href="4.3-usage-customize.html#cb11-20" aria-hidden="true"></a><span class="dt">    if (fullwidth) {</span></span>
<span id="cb11-21"><a href="4.3-usage-customize.html#cb11-21" aria-hidden="true"></a><span class="dt">      options$out.width &lt;- &quot;100%&quot;</span></span>
<span id="cb11-22"><a href="4.3-usage-customize.html#cb11-22" aria-hidden="true"></a><span class="dt">    }</span></span>
<span id="cb11-23"><a href="4.3-usage-customize.html#cb11-23" aria-hidden="true"></a><span class="dt">  }</span></span>
<span id="cb11-24"><a href="4.3-usage-customize.html#cb11-24" aria-hidden="true"></a><span class="dt">  # Return new set of options</span></span>
<span id="cb11-25"><a href="4.3-usage-customize.html#cb11-25" aria-hidden="true"></a><span class="dt">  options</span></span>
<span id="cb11-26"><a href="4.3-usage-customize.html#cb11-26" aria-hidden="true"></a><span class="dt">})</span></span>
<span id="cb11-27"><a href="4.3-usage-customize.html#cb11-27" aria-hidden="true"></a><span class="st">```</span></span>
<span id="cb11-28"><a href="4.3-usage-customize.html#cb11-28" aria-hidden="true"></a></span>
<span id="cb11-29"><a href="4.3-usage-customize.html#cb11-29" aria-hidden="true"></a><span class="co"># Embed diagram, using new option to define width</span></span>
<span id="cb11-30"><a href="4.3-usage-customize.html#cb11-30" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, dia=&#39;from_src&#39;, fullwidth=TRUE}</span></span>
<span id="cb11-31"><a href="4.3-usage-customize.html#cb11-31" aria-hidden="true"></a><span class="dt">to_diagram(src=&#39;...&#39;)</span></span>
<span id="cb11-32"><a href="4.3-usage-customize.html#cb11-32" aria-hidden="true"></a><span class="st">```</span></span></code></pre></div>
</div>
<div id="usage-multipleFormats" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Multiple output formats<a href="4.3-usage-customize.html#usage-multipleFormats" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are intended to produce documentation in multiple output formats, most probably you’ll have to apply different
customizations for different formats.</p>
<p>This could be easily achived by using <strong>R</strong> <code>if ... else ...</code> pattern (works like ternary operator) when applying values to options,
or with a few lines <strong>R</strong> code in complicated cases.</p>
<p>For example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="4.3-usage-customize.html#cb12-1" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, dia=&#39;from_src&#39;, out.height=if (!knitr::is_html_output()) &#39;15cm&#39; else NULL}</span></span>
<span id="cb12-2"><a href="4.3-usage-customize.html#cb12-2" aria-hidden="true"></a><span class="dt">to_diagram(src=&#39;...&#39;)</span></span>
<span id="cb12-3"><a href="4.3-usage-customize.html#cb12-3" aria-hidden="true"></a><span class="st">```</span></span></code></pre></div>
<p>will set drawing’s height to 15 centimeters for output formats other than HTML.</p>
</div>
<div id="usage-customize-params" class="section level3 hasAnchor" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Define parameters<a href="4.3-usage-customize.html#usage-customize-params" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is a way to separate actual values for options from code via parameters, that are defined
in a front‑matter part of <code>index.Rmd</code>.</p>
<p>This way you could tune your output or other aspects of your documentation
just by adjusting those values and keep them all in a single place.</p>
<blockquote>
<p>By the way - there is already some params defined that are reqruired for <a href="4.6-usage-spec.html#usage-spec">to_diagram</a> function and related hooks.</p>
</blockquote>
<p>Values for parameters can be calculated just in time with <strong>R</strong> by defining their values using following pattern:
<code>`r &lt;R expressions&gt;`</code>, replacing <code>&lt;R expressions&gt;</code> with your <strong>R</strong> code.</p>
<p>Parameters definition example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="4.3-usage-customize.html#cb13-1" aria-hidden="true"></a><span class="co"># This is front-matter&#39;s section to define params</span></span>
<span id="cb13-2"><a href="4.3-usage-customize.html#cb13-2" aria-hidden="true"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb13-3"><a href="4.3-usage-customize.html#cb13-3" aria-hidden="true"></a><span class="co">  # Static value:</span></span>
<span id="cb13-4"><a href="4.3-usage-customize.html#cb13-4" aria-hidden="true"></a><span class="at">  </span><span class="fu">background</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;#FFFFFF&quot;</span></span>
<span id="cb13-5"><a href="4.3-usage-customize.html#cb13-5" aria-hidden="true"></a><span class="co">  # Calculated value:</span></span>
<span id="cb13-6"><a href="4.3-usage-customize.html#cb13-6" aria-hidden="true"></a><span class="at">  </span><span class="fu">current_date</span><span class="kw">:</span><span class="at"> `r Sys.Date()`</span></span>
<span id="cb13-7"><a href="4.3-usage-customize.html#cb13-7" aria-hidden="true"></a><span class="co">  # Output format depended value:</span></span>
<span id="cb13-8"><a href="4.3-usage-customize.html#cb13-8" aria-hidden="true"></a><span class="at">  </span><span class="fu">fig_ext</span><span class="kw">:</span><span class="at"> `r if (knitr::is_latex_output()) &#39;png&#39; else null`</span></span></code></pre></div>
<p>Parameters usage example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="4.3-usage-customize.html#cb14-1" aria-hidden="true"></a><span class="st">```</span><span class="dt">{r, dia=&#39;from_src&#39;, fig.ext=params$fig_ext}</span></span>
<span id="cb14-2"><a href="4.3-usage-customize.html#cb14-2" aria-hidden="true"></a><span class="dt">to_diagram(src=&#39;...&#39;)</span></span>
<span id="cb14-3"><a href="4.3-usage-customize.html#cb14-3" aria-hidden="true"></a><span class="st">```</span></span></code></pre></div>
<p>More info can be found <a href="https://bookdown.org/yihui/rmarkdown/parameterized-reports.html">here</a>.</p>
<!-- TODO: check https://stackoverflow.com/questions/49475303/rmarkdown-child-documents-do-not-detect-their-params -->
</div>
<div id="usage-customize-summary" class="section level3 hasAnchor" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Putting all together<a href="4.3-usage-customize.html#usage-customize-summary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To avoid redundant work, and to ease refactoring and tuning following methodology is suggested to use from the start
to benefit from <strong>R Markdown</strong> features:</p>
<ol>
<li><p>Declare subject specific parameters for your documentation</p></li>
<li><p>Define global options if necessary, use parameters to adjust options</p></li>
<li><p>Define all the necessary options templates for your diagrams embedding.
You could use differnet templates for different output formats and specify their names via params,
or you could define universal templates and tune them via params or
use <code>if (knitr::is_&lt;html/latex&gt;_otput()) &lt;value1&gt; else &lt;value2&gt;</code> pattern.</p></li>
<li><p>Use options templates for diagrams code chunks, providing extra options if required</p></li>
</ol>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="4.2-usage-svg.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="4.4-usage-format.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Godhart/devdoc-swissknife/edit/main/docs_src/devdoc-swissknife-en/04-Usage-Patterns.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Devdoc-Swissknife-EN.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
